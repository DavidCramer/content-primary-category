(()=>{"use strict";const e=window.React,t=window.wp.hooks,r=window.wp.data,n=window.wp.coreData,o=window.wp.editor,a=window.wp.components,i=window.wp.compose,c=window.wp.element,l=window.wp.i18n;class s extends c.Component{render(){const{terms:t,editPost:r,primaryCat:n,deselected:o}=this.props,i=e=>r({meta:{_content_primary_category:parseInt(e)}});return o&&i(0),(0,e.createElement)(e.Fragment,null,(0,e.createElement)("hr",null),(0,e.createElement)(a.SelectControl,{label:(0,l.__)("Primary Category","content-primary-category"),help:(0,l.__)("Select a primary category.","content-primary-category"),options:[{label:(0,l.__)("None","content-primary-category"),value:""},...t],value:n,onChange:i}))}}const m=(0,i.compose)([(0,r.withSelect)(((e,t)=>{const{slug:r}=t,{getTaxonomy:a,getEntityRecords:i}=e(n.store),{getEditedPostAttribute:c}=e(o.store),l=c(a(r).rest_base),s=c("meta"),m=s?s._content_primary_category:0,d=i("taxonomy",r,{_fields:["id","name"]});return{terms:[...d?[...d].filter((e=>-1!==l.indexOf(e.id))):[]].map((e=>({label:e.name,value:e.id}))),primaryCat:m,deselected:0<m&&-1===l.indexOf(m)}})),(0,r.withDispatch)((e=>e(o.store)))])(s);(0,t.addFilter)("editor.PostTaxonomyType","david-cramer/content-primary-category",(t=>r=>{const{slug:n}=r;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(t,{...r}),n&&"category"===n&&(0,e.createElement)(m,{...r}))}))})();